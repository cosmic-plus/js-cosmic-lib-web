<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-10-specs-query.html">Query specifications</a></li><li class="nav-item"><a href="tutorial-20-cheatsheet-query.html">Query cheatsheet</a></li><li class="nav-item"><a href="tutorial-30-emitting.html">Emitting CosmicLinks without this library</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="CosmicLink.html">CosmicLink</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#addOperation">addOperation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#insertOperation">insertOperation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#lock">lock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#open">open</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#parse">parse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#selectNetwork">selectNetwork</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#send">send</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#setOperation">setOperation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#setTxFields">setTxFields</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#sign">sign</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#signSep7">signSep7</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#verifySep7">verifySep7</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-config.html">config</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.addAliases">addAliases</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.clearClickHandler">clearClickHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.removeAliases">removeAliases</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.setClickHandler">setClickHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.setupNetwork">setupNetwork</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-load.html">load</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-load.html#.css">css</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-load.html#.js">js</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-load.html#styles">styles</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-resolve.html">resolve</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.account">account</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.address">address</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.horizon">horizon</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.isAccountEmpty">isAccountEmpty</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.networkName">networkName</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.networkPassphrase">networkPassphrase</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.server">server</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSigners">txSigners</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSignersList">txSignersList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSourceAccount">txSourceAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSources">txSources</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.useNetwork">useNetwork</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#~makeAccountResponse">makeAccountResponse</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-sep7Utils.html">sep7Utils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sep7Utils.html#.isWebHandlerSupported">isWebHandlerSupported</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-sep7Utils.html#.registerWebHandler">registerWebHandler</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-signersUtils.html">signersUtils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-signersUtils.html#.extends">extends</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-signersUtils.html#.for">for</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-specs.html">specs</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-specs.html#.isOperationField">isOperationField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-specs.html#.isTransactionField">isTransactionField</a></span></li><li class="nav-heading">Namespaces</li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="SignersUtils.html">SignersUtils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SignersUtils.html#hasSigned">hasSigned</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SignersUtils.html#hasSigner">hasSigner</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#exportModule">exportModule</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#withConfig">withConfig</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><p><strong>cosmic-lib /</strong>
<a href="https://cosmic.plus/#view:js-cosmic-lib/web/doc">Documentation</a>
• <a href="https://cosmic.plus/#view:js-cosmic-lib/EXAMPLES">Examples</a>
• <a href="https://cosmic.plus/#view:js-cosmic-lib/CONTRIBUTING">Contributing</a>
• <a href="https://cosmic.plus/#view:js-cosmic-lib/CHANGELOG">Changelog</a></p>
<h1>Readme</h1>
<p><img src="https://img.shields.io/github/license/cosmic-plus/js-cosmic-lib.svg" alt="Licence">
<a href="https://david-dm.org/cosmic-plus/js-cosmic-lib"><img src="https://badgen.net/david/dep/cosmic-plus/js-cosmic-lib" alt="Dependencies"></a>
<img src="https://snyk.io/test/npm/cosmic-lib/badge.svg" alt="Vulnerabilities">
<img src="https://badgen.net/badgesize/gzip/cosmic-plus/js-cosmic-lib-web/master/cosmic-lib.js?label=bundle" alt="Bundle">
<img src="https://badgen.net/npm/dt/cosmic-lib" alt="Downloads"></p>
<p>cosmic-lib is a JavaScript implementation of the <strong>CosmicLink protocol</strong> that
comes with a few useful additional tools.</p>
<p>(Weekly updates: <a href="https://reddit.com/r/cosmic_plus">Reddit</a>,
<a href="https://twitter.com/cosmic_plus">Twitter</a>,
<a href="https://keybase.io/team/cosmic_plus">Keybase</a>,
<a href="https://t.me/cosmic_plus">Telegram</a>)</p>
<h2>What are CosmicLinks?</h2>
<p>CosmicLinks are normal URL or URI that contains a Stellar transaction encoded
in their query. It allows to pass Stellar transaction to <strong>any webpage</strong> or
<strong>any software</strong>. Here's an example on the https://cosmic.link website:</p>
<blockquote>
<p><a href="https:%5C/%5C/cosmic.link/?payment&amp;amount=100&amp;destination=tips*cosmic.link">https://cosmic.link/?payment&amp;amount=100&amp;destination=tips*cosmic.link</a></p>
</blockquote>
<p>CosmicLinks use a simple syntax that allow to write any arbitrary transaction:</p>
<blockquote>
<p><a href="https:%5C/%5C/cosmic.link/?transaction&amp;operation=manageData&amp;name=migrated&amp;value=true&amp;operation=setOptions&amp;homeDomain=anywallet.org">https://cosmic.link/?transaction&amp;operation=manageData&amp;name=migrated&amp;value=true&amp;operation=setOptions&amp;homeDomain=anywallet.org</a></p>
</blockquote>
<p>It can be used to pass transaction XDR as well:</p>
<blockquote>
<p><a href="https://cosmic.link/?xdr=AAAAAL2ef/Z7FpGtgUvkKaEg3uvy9IH+T9chWSUhQILKTk/NAAAAZAEMX34AAAADAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAIQ/AS7GRUBBd96ykumKKUFE92+oiwRuJ7KXuvPwwTQWAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==&amp;network=public">https://cosmic.link/?xdr=AAAA...AA==&amp;network=public</a></p>
</blockquote>
<p>While the <strong>https://cosmic.link</strong> website provides a convenient way to share
transactions over social medias, emails and static documents, any
wallet/service can issue or accept CosmicLinks. One big advantage of using
queries is that they can be used to pass transactions without having to rely
on any particular service.</p>
<p>This is a generalization of tools like Metamask for Ethereum, as it allows any
service to communicate with any (compatible) wallet; And users to sign
transactions from any service without ever divulging private keys.</p>
<p>The ultimate goal of the CosmicLink protocol is to enable <strong>wallet-less
applications</strong> for Stellar.</p>
<h2>Installation</h2>
<h3>Node / Yarn</h3>
<ul>
<li><strong>NPM</strong>: <code>npm install --save cosmic-lib</code></li>
<li><strong>Yarn</strong>: <code>yarn add cosmic-lib</code></li>
</ul>
<p>In your script:</p>
<pre class="prettyprint source lang-js"><code>const cosmicLib = require(&quot;cosmic-lib&quot;)
const CosmicLink = cosmicLib.CosmicLink
</code></pre>
<h3>Bower</h3>
<pre class="prettyprint source lang-js"><code>bower install cosmic-lib
</code></pre>
<p>In your HTML pages:</p>
<pre class="prettyprint source lang-HTML"><code>  &lt;script src=&quot;./bower_components/stellar-sdk/stellar-sdk.min.js&quot;>&lt;/script>
  &lt;script src=&quot;./bower_components/cosmic-lib/cosmic-lib.js&quot;>&lt;/script>
</code></pre>
<h3>Web</h3>
<pre class="prettyprint source lang-HTML"><code>  &lt;script src=&quot;https://cdn.cosmic.plus/stellar-sdk&quot;>&lt;/script>
  &lt;script src=&quot;https://cdn.cosmic.plus/cosmic-lib@2.x&quot;>&lt;/script>
</code></pre>
<p><strong>Note</strong>: For production release it is advised to serve your own copy of the
libraries.</p>
<h2>Basic Usage</h2>
<h3>Create CosmicLinks</h3>
<h4>New Transaction</h4>
<p>The transaction builder is similar to the one provided by StellarSdk.
Additionally, it accepts federated addresses and offer syntactic sugar for
memos, dates and assets.</p>
<pre class="prettyprint source lang-js"><code>const cosmicLink = new CosmicLink({ network: 'test', memo: 'Demo', maxTime: '2019-01' })
  .addOperation('payment', { destination: 'tips*cosmic.link', amount: 10 }) // XLM is implied
  .addOperation('changeTrust', { asset: 'CNY:admin*ripplefox.com' }) // Max limit is implied
  .addOperation(...)
</code></pre>
<h4>From an Existing Transaction</h4>
<ul>
<li>From a StellarSdk Transaction: <code>new CosmicLink(transaction, { network: &quot;public&quot; | &quot;test&quot; | passphrase })</code></li>
<li>From an XDR: <code>new CosmicLink(xdr, { network: &quot;public&quot; | &quot;test&quot; | passphrase })</code></li>
<li>From a CosmicLink URI/query: <code>new CosmicLink(uri|query)</code></li>
<li>From a SEP-0007 link: <code>new CosmicLink(sep7)</code></li>
</ul>
<h3>Edit a CosmicLink</h3>
<ul>
<li>Change transaction fields: <code>cosmicLink.setTxFields(parameters)</code></li>
<li>Add operation: <code>cosmicLink.addOperation(name, parameters)</code></li>
<li>Set operation: <code>cosmicLink.setOperation(index, name, parameters)</code></li>
<li>Remove operation: <code>cosmicLink.setOperation(index, null)</code></li>
</ul>
<p><strong>Example:</strong></p>
<pre class="prettyprint source lang-js"><code>cosmicLink
  .setTxFields({ memo: &quot;newMemo&quot;, source: null, sequence: null })
  .addOperation(&quot;manageData&quot;, { name: &quot;foo&quot;, value: &quot;bar&quot; })
  .setOperation(1, &quot;mergeAccount&quot;, { destination: &quot;in*tempo.eu.com&quot; })
  .setOperation(0, null)
</code></pre>
<h3>Get the Link</h3>
<ul>
<li>Get the HTML link element: <code>cosmicLink.htmlLink</code></li>
<li>Get the URI: <code>cosmicLink.uri</code></li>
<li>Get the query: <code>cosmicLink.query</code></li>
</ul>
<p>If your webpage contains an HTML link element with <code>id=&quot;cosmiclink&quot;</code>, it will
automatically get updated with the latest CosmicLink URI.</p>
<h3>Display the Transaction</h3>
<p>You'll probably want to load the StyleSheet for cosmic-lib first:</p>
<pre class="prettyprint source lang-js"><code>await cosmicLib.load.styles()
</code></pre>
<p>Then, you can get the HTML description element at: <code>cosmicLink.htmlDescription</code>.</p>
<p>If your webpage contains an HTML element with <code>id=&quot;cosmiclink_description&quot;</code>,
it will automatically get updated with the latest CosmicLink description.</p>
<h3>Formats conversion</h3>
<pre class="prettyprint source lang-js"><code>console.log(cosmicLink.json)
console.log(cosmicLink.tdesc) // The most convenient format to manipulate transactions

// Lock CosmicLink to a network & a source account to compute its Transaction & XDR.
await cosmicLink.lock()
console.log(cosmicLink.transaction)
console.log(cosmicLink.xdr)
console.log(cosmicLink.sep7)
</code></pre>
<p><strong>Note</strong>: If you parsed CosmicLink from an XDR/Transaction/SEP-0007 link you
don't need to use <code>cosmicLink.lock()</code> for conversion purpose.</p>
<h3>Sign &amp; Send the Transaction</h3>
<pre class="prettyprint source lang-js"><code>// Lock CosmicLink to a network & a source account to fetch signers data.
await cosmicLink.lock()
cosmicLink.sign(...(keypair | preimage))
await cosmicLink.send()
</code></pre>
<p><strong>Note</strong>: the transaction will automatically be transmitted to
<a href="https://stellarguard.me">StellarGuard</a> when relevant.</p>
<h3>Global Configuration</h3>
<pre class="prettyprint source lang-js"><code>/**
 * Fallback network for network-less transaction requests.
 * @default &quot;public&quot;
 */
cosmicLib.config.network = &quot;test&quot;

/**
 * Fallback account for source-less transaction requests.
 * @default undefined
 */
cosmicLib.config.source = &quot;tips*cosmic.link&quot; // Undefined by default

/**
 * Base URL to use when building CosmicLinks.
 * @default &quot;https://cosmic.link/&quot;
 */
cosmicLib.config.page = &quot;https://cosmic.link/&quot;
</code></pre>
<h3>Advanced configuration</h3>
<p>Setting the Horizon node for a given network:</p>
<pre class="prettyprint source lang-js"><code>cosmicLib.config.setupNetwork(&quot;test&quot;, &quot;https://horizon.example.org&quot;)
</code></pre>
<p>Adding a custom network:</p>
<pre class="prettyprint source lang-js"><code>cosmicLib.config.setupNetwork(
  &quot;myCustomNetwork&quot;,
  &quot;https://horizon.example.org&quot;,
  &quot;MyCustomPassphrase&quot;
)
</code></pre>
<h2>Other Utilities</h2>
<p>cosmic-lib exposes part of its underlying code as additional modules.</p>
<h3>Resolve</h3>
<ul>
<li>Get the Server object for a network <code>cosmicLib.resolve.server(&quot;public&quot; | &quot;test&quot; | passphrase)</code></li>
<li>Resolve a federated address: <code>await cosmicLib.resolve.address(&quot;tips*cosmic.link&quot;)</code></li>
<li>Resolve an account: <code>await cosmicLib.resolve.account(&quot;tips*cosmic.link&quot;)</code></li>
<li>Resolve transaction signers list: <code>await cosmicLib.resolve.txSignersList(transaction)</code></li>
</ul>
<h3>Signers Utils</h3>
<p>Extends a StellarSdk Transaction object with convenient multi-signature
utilities:</p>
<pre class="prettyprint source lang-js"><code>cosmicLib.signersUtils.extends(transaction)
console.log(transaction.signers)
console.log(transaction.signersList)
transaction.hasSigner(&quot;GB...DECX&quot;)
transaction.hasSigned(&quot;GB...DECX&quot;)
</code></pre>
<h2>Additional ressources</h2>
<h3>Documentation</h3>
<p>cosmic-lib packs more that showed in this brief presentation. Please take a
look at the manual:</p>
<ul>
<li><a href="https://cosmic.plus/js-cosmic-lib/web/doc/CosmicLink.html">Complete documentation</a></li>
<li><a href="https://cosmic.plus/js-cosmic-lib/web/doc/tutorial-10-specs-query.html">Cosmic queries specification</a></li>
<li><a href="https://cosmic.plus/js-cosmic-lib/web/doc/tutorial-20-cheatsheet-query.html">Cosmic queries cheatsheet</a></li>
<li><a href="https://cosmic.plus/js-cosmic-lib/web/doc/tutorial-30-emitting.html">Emitting CosmicLinks without this library</a></li>
</ul>
<h3>Related tools</h3>
<ul>
<li><a href="https://cosmic.plus/js-cosmic-lib/web/demo.html">Demo page</a></li>
<li><a href="https://cosmic.plus/js-cosmic-lib/web/debug.html">Debug page</a></li>
</ul>
<h3>Related articles</h3>
<ul>
<li>23 Jan 2018: <a href="https://medium.com/cosmic-plus/one-year-later-walletless-stellar-applications-are-finally-coming-238a8aa368b2">One Year Later: Walletless Stellar Applications Are Finally
Coming</a></li>
<li>26 Jul 2018: <a href="https://medium.com/cosmic-plus/understanding-cosmic-links-ee2ace259671">Understanding Cosmic
Links</a></li>
<li>22 Jan 2018: <a href="https://medium.com/cosmic-plus/a-standardize-way-of-handling-stellar-transactions-4dd35382eda1">A standardized way of handling Stellar
transactions</a></li>
</ul>
<h3>Services that uses CosmicLinks</h3>
<ul>
<li>Equilibre.io portfolio balancer: <a href="https:%5C/%5C/equilibre.io">https://equilibre.io</a></li>
<li>The Cosmic.Link website: <a href="https:%5C/%5C/cosmic.link">https://cosmic.link</a></li>
<li>Stellar Authenticator: <a href="https:%5C/%5C/stellar-authenticator.org">https://stellar-authenticator.org</a></li>
</ul>
<h2>Links</h2>
<p><strong>Organization:</strong> <a href="https://cosmic.plus/">Cosmic.plus</a> | <a href="https://git.cosmic.plus">@GitHub</a> | <a href="https://www.npmjs.com/search?q=cosmic-plus">@NPM</a></p>
<p><strong>Follow:</strong> <a href="https://reddit.com/r/cosmic_plus">Reddit</a> | <a href="https://twitter.com/cosmic_plus">Twitter</a> | <a href="https://medium.com/cosmic-plus">Medium</a> | <a href="https://codepen.io/cosmic-plus">Codepen</a></p>
<p><strong>Talk:</strong> <a href="https://t.me/cosmic_plus">Telegram</a> | <a href="https://keybase.io/team/cosmic_plus">Keybase</a></p></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>