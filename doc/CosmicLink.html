<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CosmicLink - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-10-specs-query.html">Query specifications</a></li><li class="nav-item"><a href="tutorial-20-cheatsheet-query.html">Query cheatsheet</a></li><li class="nav-item"><a href="tutorial-30-emitting.html">Emitting CosmicLinks without this library</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="CosmicLink.html">CosmicLink</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#addOperation">addOperation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#insertOperation">insertOperation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#lock">lock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#open">open</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#parse">parse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#selectNetwork">selectNetwork</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#send">send</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#setOperation">setOperation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#setTxFields">setTxFields</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#sign">sign</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#signSep7">signSep7</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#verifySep7">verifySep7</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="SignersUtils.html">SignersUtils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SignersUtils.html#hasSigned">hasSigned</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SignersUtils.html#hasSigner">hasSigner</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-config.html">config</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.addAliases">addAliases</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.clearClickHandler">clearClickHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.removeAliases">removeAliases</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.setClickHandler">setClickHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.setupNetwork">setupNetwork</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-load.html">load</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-load.html#.css">css</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-load.html#.js">js</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-load.html#styles">styles</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-resolve.html">resolve</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.account">account</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.address">address</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.horizon">horizon</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.isAccountEmpty">isAccountEmpty</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.networkName">networkName</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.networkPassphrase">networkPassphrase</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.server">server</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSigners">txSigners</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSignersList">txSignersList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSourceAccount">txSourceAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSources">txSources</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.useNetwork">useNetwork</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#~makeAccountResponse">makeAccountResponse</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-signersUtils.html">signersUtils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-signersUtils.html#.extends">extends</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-signersUtils.html#.for">for</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-specs.html">specs</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-specs.html#.isOperationField">isOperationField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-specs.html#.isTransactionField">isTransactionField</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#exportModule">exportModule</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#withConfig">withConfig</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">CosmicLink</h1>
    

    




<section>

<header>
    
        <h2>
        CosmicLink
        </h2>
        
            <div class="class-description"><table>
<thead>
<tr>
<th>Formats</th>
<th>Data</th>
<th>Actions</th>
<th>Editor</th>
<th>HTML</th>
</tr>
</thead>
<tbody>
<tr>
<td>---------------------</td>
<td>---------------------</td>
<td>---------------------</td>
<td>---------------------</td>
<td>---------------------</td>
</tr>
<tr>
<td><a href="CosmicLink.html#uri">uri</a></td>
<td><a href="CosmicLink.html#page">page</a></td>
<td><a href="CosmicLink.html#open">open</a></td>
<td><a href="CosmicLink.html#parse">parse</a></td>
<td><a href="CosmicLink.html#htmlDescription">htmlDescription</a></td>
</tr>
<tr>
<td><a href="CosmicLink.html#query">query</a></td>
<td><a href="CosmicLink.html#network">network</a></td>
<td><a href="CosmicLink.html#lock">lock</a> async</td>
<td><a href="CosmicLink.html#setTxFields">setTxFields</a></td>
<td><a href="CosmicLink.html#htmlLink">htmlLink</a></td>
</tr>
<tr>
<td><a href="CosmicLink.html#tdesc">tdesc</a></td>
<td><a href="CosmicLink.html#horizon">horizon</a></td>
<td><a href="CosmicLink.html#sign">sign</a></td>
<td><a href="CosmicLink.html#addOperation">addOperation</a></td>
<td></td>
</tr>
<tr>
<td><a href="CosmicLink.html#json">json</a></td>
<td><a href="CosmicLink.html#callback">callback</a></td>
<td><a href="CosmicLink.html#send">send</a> async</td>
<td><a href="CosmicLink.html#setOperation">setOperation</a></td>
<td></td>
</tr>
<tr>
<td><a href="CosmicLink.html#transaction">transaction</a></td>
<td><a href="CosmicLink.html#source">source</a></td>
<td><a href="CosmicLink.html#signSep7">signSep7</a></td>
<td><a href="CosmicLink.html#insertOperation">insertOperation</a></td>
<td></td>
</tr>
<tr>
<td><a href="CosmicLink.html#xdr">xdr</a></td>
<td><a href="CosmicLink.html#status">status</a></td>
<td><a href="CosmicLink.html#verifySep7">verifySep7</a> async</td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="CosmicLink.html#sep7">sep7</a></td>
<td><a href="CosmicLink.html#errors">errors</a></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><a href="CosmicLink.html#locker">locker</a></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><a href="CosmicLink.html#cache">cache</a></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><a href="CosmicLink.html#extra">extra</a></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<p>The <strong>CosmicLink</strong> class represents Stellar
<a href="https://stellar.org/developers/guides/concepts/transactions.html">transactions</a>
encoded in various formats. It allows to convert between those formats, to
edit the underlying transaction, to build it, to sign it and to send it to
the blockchain.</p>
<p>There are 3 main formats from which the other are derived:</p>
<ul>
<li>The StellarSdk Transaction} object. (<strong>transaction</strong>)</li>
<li>The CosmicLink, which is a transaction encoded as a query. (<strong>query</strong>)</li>
<li>The Tdesc, which is an internal JSON-compatible format in-between those two.
It is the easier format to work with. (<strong>tdesc</strong>)</li>
</ul>
<p>Those formats can be derived into other related formats:</p>
<ul>
<li>The XDR, which's a base64 representation of StellarSdk Transaction. (<strong>xdr</strong>)</li>
<li>The Sep-0007 link, in its XDR form. (<strong>sep7</strong>)</li>
<li>The CosmicLink URL/URI, which is a page plus the query. (<strong>uri</strong>)</li>
<li>The Tdesc JSON, which is its stringified version. (<strong>json</strong>)</li>
</ul>
<p>A CosmicLink object can be created from any of those formats. Some of the
other formats are immediately available, while others may need an
<code>await cosmicLink.lock()</code> operation to become computable:</p>
<ul>
<li>If you create a CosmicLink from an <strong>uri</strong>, a <strong>query</strong>, a <strong>tdesc</strong> or a
<strong>json</strong>, only those 4 formats are available at first. Transaction, xdr &amp;
sep7 will become available after a <code>cosmicLink.lock()</code>. (<strong>free formats</strong>)</li>
<li>If you create a CosmicLink from a <strong>transaction</strong>, an <strong>xdr</strong> or a <strong>sep7</strong>,
all formats will immediately be available. (<strong>locked formats</strong>)</li>
</ul>
<p>For a better efficiency, formats are lazy-evaluated. This means that they are
computed once only if/when you call them:</p>
<pre class="prettyprint source lang-js"><code>const cosmicLink = new CosmicLink(xdr, { network: 'test' })
console.log(cosmicLink.query)
</code></pre>
<p>The role of <code>cosmicLink.lock()</code> is centric to this class. In practice, the
free formats don't have to be tied to a <strong>network</strong>, a <strong>source</strong> or a
<strong>sequence number</strong>. For example, the CosmicQuery <code>?inflation</code> is a valid
generic transaction that can be locked to any network/source/sequence
combination.</p>
<p>On the other hand, locked formats are always tied to a particular combination
of those, hence the need for a <strong>lock</strong> command:</p>
<pre class="prettyprint source lang-js"><code>const cosmicLib = require('cosmic-lib')
cosmicLib.network = 'test'
cosmicLib.source = 'tips*cosmic.link'

const cosmicLink = new cosmicLib.CosmicLink('?inflation')

console.log(cosmicLink.tdesc.source)    // => undefined
console.log(cosmicLink.tdesc.network)   // => undefined
console.log(cosmicLink.tdesc.sequence)  // => undefined
console.log(cosmicLink.xdr)             // => undefined

await cosmicLink.lock({)

console.log(cosmicLink.tdesc.source)    // => 'GC6Z...2JVW'
console.log(cosmicLink.tdesc.network)   // => 'test'
console.log(cosmicLink.tdesc.sequence)  // => 29...3903
console.log(cosmicLink.xdr)             // => 'AAAA....AA=='
</code></pre>
<p>The <strong>lock</strong> command is asynchronous because free formats accept
<a href="https://stellar.org/developers/guides/concepts/federation.html">federated addresses</a>,
but locked formats don't. The library automatically resolve
those and this is an asynchronous operation. At the same time, it downloads
the required data from the blockchain to handle multi-signers transactions.</p>
<p>After the lock operation, all free formats are updated according to the new
state of the transaction. It is now possible to <code>cosmicLink.sign(keypair)</code>
it, and to <code>cosmicLink.send()</code> it to the blockchain.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        
<div class="section-method">

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="CosmicLink"><span class="type-signature"></span>new CosmicLink<span class="signature">(transaction, options)</span><span class="type-signature"> &rarr; {<a href="CosmicLink.html">CosmicLink</a>}</span></h4>

    



<div class="description">
    <p>Create a new CosmicLink object. <strong>transaction</strong> can be one of the accepted
format: uri, query, json, tdesc, transaction, xdr or sep7.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line136">line 136</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>transaction</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>
|

<span class="param-type"><code>Object</code></span>
|

<span class="param-type"><code>Transaction</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>A transaction in one of
thoses formats: uri, query, json, tdesc, transaction, xdr, sep7</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Additional options</p>
                
                    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>page</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The base URI to use when converting transaction
to URI format.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>network</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>For Transaction/XDR formats, the network for
which it have been created</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>strip</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Remove an element from the original
XDR transaction. Valid values are <code>source</code>, <code>sequence</code> and
<code>signatures</code>. Stripping out sequence means that the transaction request
can get signed anytime in the future, possibly several times.
Stripping out source means that it can get signed by any account.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stripNeutralAccount</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>If set, strip source account
out of SEP-0007/XDR requests when it is equal to the neutral account
(<code>GAAA...AWHF</code>).</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stripNeutralSequence</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>If set, strip sequence out
of SEP-0007/XDR requests when it is equal to <code>0</code>.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>

                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code><a href="CosmicLink.html">CosmicLink</a></code></span>


    </dd>
</dl>


    
</div>



</div>
    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<div class="section-members">
<h4 class="name" id="cache"><span class="type-signature"></span>cache<span class="type-signature"></span></h4>




<div class="description">
    <p>The CosmicLink cache contains the resolved federations addresses and the
accounts object. Using the same set of data for all the CosmicLink related
computations ensure consistent results.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line596">line 596</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="callback"><span class="type-signature"></span>callback<span class="type-signature"></span></h4>




<div class="description">
    <p>The URL at which the signed transaction will be posted. This can be defined
either locally (<code>cosmicLink.tdesc.callback</code>) or globally
(<code>cosmicLib.config.callback</code>). The local configuration takes precedence.</p>
<p>When no callback is defined, the signed transaction is posted to
<a href="CosmicLink.html#horizon">Horizon</a>. This is the default behavior.</p>
<p><strong>Note:</strong> cosmicLink.tdesc should be edited using <a href="CosmicLink.html#setTxFields">setTxFields</a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line350">line 350</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="errors"><span class="type-signature"></span>errors<span class="type-signature"></span></h4>




<div class="description">
    <p>By default <code>false</code>, or an <em>Array</em> of errors.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line590">line 590</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="extra"><span class="type-signature"></span>extra<span class="type-signature"></span></h4>




<div class="description">
    <p>After parsing a SEP-0007 link, <code>cosmicLink.extra</code> contains SEP-0007
specific information:</p>
<ul>
<li><code>cosmicLink.extra.type</code> indicates the operation encoded into the SEP-0007
link (either <code>tx</code> or <code>pay</code>).</li>
<li><code>cosmicLink.extra.originDomain</code> is a <em>Promise</em> that resolves to the
origin_domain parameter when the link signature is valid. It rejects an
error when the signature check fails. This property is <code>undefined</code> when
the link has no origin_domain.</li>
<li><code>cosmicLink.extra.signature</code> contains the link signature, if any.</li>
<li><code>cosmicLink.extra.pubkey</code> contains the tx operation <code>pubkey</code>, if any.</li>
<li><code>cosmicLink.extra.msg</code> contains the parsed <code>msg</code>, if any. This is
provided for compatibility purpose only. Displaying messages from
untrusted sources into trusted interfaces opens hard to mitigate attack
vectors &amp; is discouraged.</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line605">line 605</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="horizon"><span class="type-signature"></span>horizon<span class="type-signature"></span></h4>




<div class="description">
    <p>The URL of the horizon node from which ledger data will be retrieved, and
to which the signed transaction will be posted if there's no
<a href="CosmicLink.html#callback">callback</a>.</p>
<p>This can be defined either locally (<code>cosmicLink.tdesc.horizon</code>) or globally
(using <a href="module-config.html#.setupNetwork">setupNetwork</a>). This parameter is
special in the sense that it's the only one for which the global
configuration takes precedence.</p>
<p>The rationale for this behavior is that we want transaction emitter to
provide a fallback Horizon URL in the special case none is known for a
custom network, but generally speaking it won't be right to allow the
transaction emitter to force us to use a particular Horizon node.</p>
<p><strong>Note:</strong> cosmicLink.tdesc should be edited using <a href="CosmicLink.html#setTxFields">setTxFields</a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line332">line 332</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="htmlDescription"><span class="type-signature"></span>htmlDescription<span class="type-signature"></span></h4>




<div class="description">
    <p>The HTML DOM node that displays a description of the current transaction.
This is a browser-only property.</p>
<p>If your HTML page contains an element with <code>id=&quot;cosmiclink_description&quot;</code>,
it will automatically get populated with the description of the last
CosmicLink created.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line492">line 492</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="htmlLink"><span class="type-signature"></span>htmlLink<span class="type-signature"></span></h4>




<div class="description">
    <p>A link HTML Element that points to <code>cosmicLink.uri</code></p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line500">line 500</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="json"><span class="type-signature"></span>json<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction in JSON format. This is a stringified version of
<a href="CosmicLink.html#tdesc">Tdesc</a> format.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line227">line 227</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="locker"><span class="type-signature"></span>locker<span class="type-signature"></span></h4>




<div class="description">
    <p>The locker property tells that a CosmicLink have been locked, and exposes
the network &amp; source values to which it have been locked.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_action.js.html">src/action.js</a>, <a href="src_action.js.html#line72">line 72</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="network"><span class="type-signature"></span>network<span class="type-signature"></span></h4>




<div class="description">
    <p>The network for this transaction. This can be defined either locally
(<code>cosmicLink.tdesc.network</code>) or globally (<code>cosmicLib.config.network</code>). The
local configuration takes precedence, or, in other words, the global
network is a fallback value in case the transaction emitter doesn't set
one.</p>
<p><strong>Note:</strong> cosmicLink.tdesc should be edited using <a href="CosmicLink.html#setTxFields">setTxFields</a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line310">line 310</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="page"><span class="type-signature"></span>page<span class="type-signature"></span></h4>




<div class="description">
    <p>The page this CosmicLink uses to construct its <a href="CosmicLink.html#uri">URI</a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line281">line 281</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="query"><span class="type-signature"></span>query<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction encoded in the Cosmic
Query format. This format allows to
conveniently pass around Stellar transactions over any URI.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line173">line 173</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="sep7"><span class="type-signature"></span>sep7<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink transaction in
<a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0007.md">SEP-0007</a>
link format. Only the XDR part of this protocol is currently supported by
CosmicLink, minus the signature verification.</p>
<p>If you created the CosmicLink from uri, query, tdesc or json format, a
<a href="CosmicLink.html#lock">lock()</a> operation is needed to make this format
available.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line272">line 272</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="source"><span class="type-signature"></span>source<span class="type-signature"></span></h4>




<div class="description">
    <p>The source for this transaction. This can be defined either locally
(<code>cosmicLink.tdesc.source</code>) or globally (<code>cosmicLib.config.source</code>). The
local configuration takes precedence, or, in other words, the global source
is a fallback value in case the transaction emitter doesn't set one.</p>
<p><strong>Note:</strong> cosmicLink.tdesc should be edited using <a href="CosmicLink.html#setTxFields">setTxFields</a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line296">line 296</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="status"><span class="type-signature"></span>status<span class="type-signature"></span></h4>




<div class="description">
    <p>The status of a CosmicLink. It becomes non-null in case of failure.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line586">line 586</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="tdesc"><span class="type-signature"></span>tdesc<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction in Tdesc format. This is in-between an objectified
query representation and a simplified StellarSdk Transaction object. It has
been created to be convenient to understand, use and manipulate.</p>
<p>If you need to read the transaction parameters, this is the format of
choice:</p>
<pre class="prettyprint source lang-js"><code>console.log(cosmicLink.tdesc.network) // Does the transaction enforce a network?
console.log(cosmicLink.tdesc.source)  // Does the transaction enforce a source?
console.log(cosmicLink.tdesc.memo)    // A simplified memo object or undefined
console.log(cosmicLink.operations)    // Transaction operations in simplified format
</code></pre>
<p>This formats authorize <a href="https://stellar.org/developers/guides/concepts/federation.html">federated addresses</a>
everywhere StellarSdk Transaction accept public keys. Those addresses are
resolved when running the <a href="CosmicLink.html#lock">lock</a> method, and the
tdesc is replaced by a resolved one.</p>
<p>Tdesc is also very convenient to edit. To keep the CosmicLink in sync, you
either need to <a href="CosmicLink.html#parse">parse</a> the edited tdesc, or to edit
it using the dedicated methods:</p>
<ul>
<li><a href="CosmicLink.html#setTxFields">setTxFields</a>: set/clear transaction fields</li>
<li><a href="CosmicLink.html#addOperation">addOperation</a>: add a new operation</li>
<li><a href="CosmicLink.html#setOperation">setOperation</a>: edit/clear an operation</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line210">line 210</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="transaction"><span class="type-signature"></span>transaction<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction in StellarSdk
<a href="https://stellar.github.io/js-stellar-sdk/Transaction.html">Transaction</a>
format.</p>
<p>If you created the CosmicLink from uri, query, tdesc or json format, a
<a href="CosmicLink.html#lock">lock()</a> operation is needed to make this format
available.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line241">line 241</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="uri"><span class="type-signature"></span>uri<span class="type-signature"></span></h4>




<div class="description">
    <p>A CosmicLink is a URI that embed a Cosmic <a href="CosmicLink.html#query">Query</a>.
This format is simply the <code>cosmicLink.query</code> appended to the
<code>cosmicLink.page</code></p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line163">line 163</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="xdr"><span class="type-signature"></span>xdr<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction in
<a href="https://stellar.org/developers/guides/concepts/xdr.html">XDR</a>
format.</p>
<p>If you created the CosmicLink from uri, query, tdesc or json format, a
<a href="CosmicLink.html#lock">lock()</a> operation is needed to make this format
available.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line254">line 254</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            
<div class="section-method">

    

    <h4 class="name" id="addOperation"><span class="type-signature"></span>addOperation<span class="signature">(type, params)</span><span class="type-signature"> &rarr; {<a href="CosmicLink.html">CosmicLink</a>}</span></h4>

    



<div class="description">
    <p>Add a new operation to CosmicLink. <strong>params</strong> should follow the Tdesc format,
but fields values can be written using query or StellarSdk format as well.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line396">line 396</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation type.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation parameters.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code><a href="CosmicLink.html">CosmicLink</a></code></span>


    </dd>
</dl>


    
</div>



<div class="section-examples">
<h5>Examples</h5>

    <pre class="prettyprint"><code>cosmicLink.addOperation('changeTrust', { asset: 'CNY:admin*ripplefox' })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.addOperation('changeTrust', { asset: { code: 'CNY', issuer: 'admin*ripplefox } })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.addOperation('changeTrust', { asset: new StellarSdk.Asset('CNY', ...) })</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="insertOperation"><span class="type-signature"></span>insertOperation<span class="signature">(index, type, params)</span><span class="type-signature"> &rarr; {<a href="CosmicLink.html">CosmicLink</a>}</span></h4>

    



<div class="description">
    <p>Insert an operation at <strong>index</strong>. <strong>params</strong> should follow the
Tdesc format, but fields can be written using query or StellarSdk format
as well.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line419">line 419</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>index</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>integer</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation index.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation type.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>params</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation parameters.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code><a href="CosmicLink.html">CosmicLink</a></code></span>


    </dd>
</dl>


    
</div>



<div class="section-examples">
<h5>Example</h5>

    <pre class="prettyprint"><code>cosmicLink.insertOperation(0, 'changeTrust', {
  asset: 'CNY:admin*ripplefox'
})</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="lock"><span class="type-signature">(async) </span>lock<span class="signature">(options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Lock a CosmicLink to a network/source pair. If the cosmicLink was created
from a query/uri/tdesc/json, it will create the corresponding
transaction/xdr/sep7 formats.</p>
<p>This operation must be performed by the wallet before signing &amp; sending the
transaction.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_action.js.html">src/action.js</a>, <a href="src_action.js.html#line46">line 46</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                
                
                    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>network</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Local fallback network</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>horizon</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Local fallback horizon (overwrited by global configuration)</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Local fallback callback</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>source</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Local fallback source</p>
                
            </td>
        </tr>

    
    </tbody>
</table>

                
            </td>
        </tr>

    
    </tbody>
</table>
















<div class="section-examples">
<h5>Example</h5>

    <pre class="prettyprint"><code>cosmicLib.config.network = "test"
const cosmicLink = new CosmicLink("?setOptions")
console.log(cosmicLink.network) // => undefined
console.log(cosmicLink.xdr)     // => undefined
await cosmicLink.lock()
console.log(cosmicLink.network) // => "test"
console.log(cosmicLink.xdr)     // => "AAAA...AA=="</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="open"><span class="type-signature"></span>open<span class="signature">(target<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Open CosmicLink in <strong>target</strong>.</p>
<ul>
<li><code>frame</code> (default): Open cosmicLink in a side-frame.</li>
<li><code>tab</code>: Open cosmicLink in a new tab.</li>
<li><code>current</code>: Open cosmicLink into the current window.</li>
<li><code>sep7</code>: Open cosmicLink using user's SEP-0007 handler.</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line516">line 516</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>target</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>String</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    "frame"
                
                </td>
            

            <td class="description last">
                <p>Open <code>cosmicLink</code> into the requested
target. Valid targets are: <code>frame</code>, <code>tab</code>, <code>current</code> and <code>sep7</code>.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="parse"><span class="type-signature"></span>parse<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Re-parse this CosmicLink. Useful in implementing transaction editors. The
parameters are the same than Constructor,
and the result is similar except that no new CosmicLink object is created.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line153">line 153</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="selectNetwork"><span class="type-signature"></span>selectNetwork<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Select the network that this CosmicLink uses.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    
        <dt class="important tag-deprecated">Deprecated:</dt><dd><ul class="dummy"><li>StellarSdk global `Network` setting is deprecated.</li></ul></dd>
    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line471">line 471</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="send"><span class="type-signature"></span>send<span class="signature">(horizon<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    



<div class="description">
    <p>Send CosmicLink's transaction to a blockchain validator, or to
<a href="https://stellarguard.me">StellarGuard</a> when relevant. A
CosmicLink have to be <a href="CosmicLink.html#lock">locked</a> before sending.</p>
<p>Returns a promise that resolve/reject to the horizon server response.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_action.js.html">src/action.js</a>, <a href="src_action.js.html#line189">line 189</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>horizon</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>horizon</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>An horizon node URL</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Object</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>The server response</p>
</div>

    
</div>



<div class="section-examples">
<h5>Example</h5>

    <pre class="prettyprint"><code>cosmicLink.send()
  .then(console.log)
  .catch(console.error)</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="setOperation"><span class="type-signature"></span>setOperation<span class="signature">(index, type, params)</span><span class="type-signature"> &rarr; {<a href="CosmicLink.html">CosmicLink</a>}</span></h4>

    



<div class="description">
    <p>Set/remove one of the CosmicLink operations. <strong>params</strong> should follow the
Tdesc format, but fields can be written using query or StellarSdk format
as well. If <strong>type</strong> is set to <code>null</code>, the operation at <strong>index</strong>
is deleted.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line450">line 450</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>index</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>integer</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation index.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation type.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>params</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation parameters.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code><a href="CosmicLink.html">CosmicLink</a></code></span>


    </dd>
</dl>


    
</div>



<div class="section-examples">
<h5>Examples</h5>

    <pre class="prettyprint"><code>cosmicLink.setOperation(1, 'setOptions', { homeDomain: 'example.org' })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.setOperation(2, null)</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="setTxFields"><span class="type-signature"></span>setTxFields<span class="signature">(object)</span><span class="type-signature"> &rarr; {<a href="CosmicLink.html">CosmicLink</a>}</span></h4>

    



<div class="description">
    <p>Add/remove transaction fields and reparse the CosmicLink. <strong>object</strong> should
follow the Tdesc format, but fields values can be written using query or
StellarSdk format as well.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line373">line 373</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>object</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Transaction fields definition. Fields can be either
written using the JSON format or the query format</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code><a href="CosmicLink.html">CosmicLink</a></code></span>


    </dd>
</dl>


    
</div>



<div class="section-examples">
<h5>Examples</h5>

    <pre class="prettyprint"><code>cosmicLink.setTxFields({ minTime: '2018-10', maxTime: '2019-01' })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.setTxFields({ minTime: null, maxTime: null })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.setTxFields({ memo: 'Bonjour!' })</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="sign"><span class="type-signature"></span>sign<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Sign CosmicLink's Transaction with <strong>keypairs_or_preimage</strong> and update the
other formats accordingly. Only legit signers are allowed to sign, and a
CosmicLink have to be <a href="CosmicLink.html#lock">locked</a> before signing.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_action.js.html">src/action.js</a>, <a href="src_action.js.html#line110">line 110</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>...keypairs_or_preimage</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Keypair</code></span>
|

<span class="param-type"><code>Buffer</code></span>
|

<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="signSep7"><span class="type-signature"></span>signSep7<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Sign SEP-0007 link for <strong>domain</strong>, using <strong>keypair</strong>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line552">line 552</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="verifySep7"><span class="type-signature">(async) </span>verifySep7<span class="signature">()</span><span class="type-signature"> &rarr; {undefined|String}</span></h4>

    



<div class="description">
    <p>Verify SEP-0007 signature by resolving <a href="CosmicLink.html#extra"><code>cosmicLink.extra.domain</code></a>, if any.
Throw an error if the signature is not valid.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_cosmiclink.js.html">src/cosmiclink.js</a>, <a href="src_cosmiclink.js.html#line564">line 564</a>
    </li></ul></dd>
    

    

    

    
</dl>





















<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>undefined</code></span>
|

<span class="param-type"><code>String</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>The resolved <code>cosmicLink.extra.domain</code>, if any.</p>
</div>

    
</div>



</div>
        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>